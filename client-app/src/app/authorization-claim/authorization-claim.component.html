<app-form-header [breadcrumbs]="breadcrumbs"></app-form-header>
<!-- <app-breadcrumb [data]="breadcrumbs"></app-breadcrumb> -->
<div class="container-background">
  <div class="container-foreground">
    <div id="loading-overlay">
      <p class="loader-text">
        <img src="/assets/loader/loader_new.gif" alt="loder" width="150px" />
      </p>
    </div>
    <div
      style="
        padding: 5px;
        border-top: 2px solid #eee;
        height: 630px;
        overflow-y: scroll;
      "
    >
      <div>
        <div class="panel panel-default ui-call">
          <div class="panel-heading">
            <span> Authorization Information </span>
            <strong>(AUTHORIZATION ID: {{ authorizationIDForDisplay }})</strong>
          </div>
          <div class="panel-body" style="padding: 10px">
            <div class="row">
              <div class="col-md-2">
                <label>Begin Date</label>
                <div>
                  <p-calendar
                    [(ngModel)]="authFormDetail.beginDate"
                    name="beginDate"
                    [showTime]="true"
                    [disabled]="true"
                    [showIcon]="true"
                    [monthNavigator]="true"
                    [yearNavigator]="true"
                    yearRange="1900:2030"
                    [inputStyle]="{ height: '30px', width: '90% !important' }"
                  >
                  </p-calendar>
                </div>
              </div>
              <div class="col-md-2">
                <label>End Date</label>
                <div>
                  <p-calendar
                    [(ngModel)]="authFormDetail.endDate"
                    name="endDate"
                    [showTime]="true"
                    [disabled]="true"
                    [showIcon]="true"
                    [monthNavigator]="true"
                    [yearNavigator]="true"
                    yearRange="1900:2030"
                    [inputStyle]="{ height: '30px', width: '100% !important' }"
                  >
                  </p-calendar>
                </div>
              </div>
              <div class="col-md-3">
                <label>{{ authFormDetail.pay }}</label>
                <input
                  class="form-control"
                  [disabled]="true"
                  name="provider"
                  [(ngModel)]="payName"
                  style="
                    height: 30px;
                    border: 1px solid #737374;
                    font-size: 1.2rem;
                  "
                  type="text"
                />
              </div>
              <div class="col-md-3">
                <label>Procode</label>
                <input
                  class="form-control"
                  [disabled]="true"
                  name="Procode"
                  [(ngModel)]="authFormDetail.procode"
                  style="
                    height: 30px;
                    border: 1px solid #737374;
                    font-size: 1.2rem;
                  "
                  type="text"
                />
              </div>
              <div class="col-md-2">
                <label>Unit Type</label>
                <input
                  class="form-control"
                  [disabled]="true"
                  name="Procode"
                  [(ngModel)]="authFormDetail.unitType"
                  style="
                    height: 30px;
                    border: 1px solid #737374;
                    font-size: 1.2rem;
                  "
                  type="text"
                />
              </div>
            </div>
            <br />
            <div class="row">
              <div class="col-md-2">
                <label>Unit Remaining</label>
                <div>
                  <p-spinner
                    name="unitsRemaining"
                    [disabled]="true"
                    [step]="0.25"
                    [(ngModel)]="authFormDetail.unitsRemaining"
                  ></p-spinner>

                  <!-- <input class="form-control" [disabled]='true' name="unitsRemaining"
                    [(ngModel)]="authFormDetail.unitsRemaining"
                    style="height: 30px;border: 1px solid #737374;font-size: 1.2rem;" type="number"> -->
                </div>
              </div>
              <div class="col-md-2">
                <label>Units</label>
                <div>
                  <p-spinner
                    name="unitsAuth"
                    [disabled]="true"
                    [step]="0.25"
                    [(ngModel)]="authFormDetail.unitsAuth"
                  >
                  </p-spinner>
                  <!-- <input class="form-control" [disabled]='true' name="unitsAuth" [(ngModel)]="authFormDetail.unitsAuth"
                    style="height: 30px;border: 1px solid #737374;font-size: 1.2rem;" type="number"> -->
                </div>
              </div>
              <div class="col-md-3">
                <label>Payor rate</label>
                <div>
                  <p-spinner
                    name="payorRate"
                    [disabled]="true"
                    [step]="0.25"
                    [(ngModel)]="authFormDetail.payorRate"
                  >
                  </p-spinner>
                </div>

                <!-- <input class="form-control" name="payorRate" [disabled]='true' [(ngModel)]="authFormDetail.payorRate"
                  style="height: 30px;border: 1px solid #737374;font-size: 1.2rem;" type="number"> -->
              </div>
              <div class="col-md-3">
                <label>Provider rate</label>
                <p-spinner
                  name="providerRate"
                  [disabled]="true"
                  [step]="0.25"
                  [(ngModel)]="authFormDetail.providerRate"
                ></p-spinner>
                <!-- <input class="form-control" name="providerRate" [disabled]='true'
                  [(ngModel)]="authFormDetail.providerRate"
                  style="height: 30px;border: 1px solid #737374;font-size: 1.2rem;" type="number"> -->
              </div>
              <div class="col-md-2">
                <div>
                  <p-checkbox
                    name="groupname"
                    [disabled]="true"
                    [(ngModel)]="authFormDetail.payPlacement"
                    label="Pay Placement"
                    [binary]="true"
                  >
                  </p-checkbox>
                </div>

                <div>
                  <p-checkbox
                    name="groupname"
                    [disabled]="true"
                    [(ngModel)]="authFormDetail.paySponsor"
                    label="Pay Sponsor"
                    [binary]="true"
                  >
                  </p-checkbox>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="panel panel-default ui-call">
          <div class="panel-heading">
            Claim Information <b *ngIf="claimID">(CLAIM ID:{{ claimID }})</b>
          </div>
          <div class="panel-body" style="padding: 10px">
            <div class="row">
              <div class="col-md-2">
                <label>Begin Date</label>
                <div>
                  <p-calendar
                    [showTime]="true"
                    [(ngModel)]="authFormDetail.claim_beginDate"
                    [disabled]="isDetail"
                    (ngModelChange)="onChangeClaimBeginDate()"
                    name="beginDate"
                    [showIcon]="true"
                    [monthNavigator]="true"
                    [yearNavigator]="true"
                    yearRange="1900:2030"
                    [inputStyle]="{ height: '30px', width: '100% !important' }"
                  >
                  </p-calendar>
                </div>
              </div>
              <div class="col-md-2">
                <label>End Date</label>
                <div>
                  <p-calendar
                    [showTime]="true"
                    [(ngModel)]="authFormDetail.claim_endDate"
                    [disabled]="isDetail"
                    name="claim_endDate"
                    (ngModelChange)="onChangeClaimBeginDate()"
                    [showIcon]="true"
                    [monthNavigator]="true"
                    [yearNavigator]="true"
                    yearRange="1900:2030"
                    [inputStyle]="{ height: '30px', width: '100% !important' }"
                  >
                  </p-calendar>
                </div>
              </div>
              <div class="col-md-2">
                <label>&nbsp;</label>
                <div>
                  <p-checkbox
                    name="groupname"
                    [(ngModel)]="authFormDetail.date_claimOverride"
                    [disabled]="isDetail"
                    label="Override Date"
                    [binary]="true"
                  >
                  </p-checkbox>
                </div>
              </div>

              <div class="col-md-3">
                <label>Procode</label>
                <div>
                  <p-autoComplete
                    [(ngModel)]="claimProcode"
                    name="procode"
                    [disabled]="isDetail"
                    [suggestions]="allProcodes"
                    [dropdown]="true"
                    [forceSelection]="true"
                    field="fullName"
                    (completeMethod)="getProcode($event)"
                  >
                  </p-autoComplete>
                </div>
                <!-- <input class="form-control" name="Procode" [disabled]='true'[(ngModel)]="authFormDetail.claim_procode"
                  style="height: 30px;border: 1px solid #737374;font-size: 1.2rem;" type="text"> -->
              </div>
              <div class="col-md-3">
                <label>Unit Type</label>
                <div>
                  <p-autoComplete
                    [(ngModel)]="ClaimUnitType"
                    name="unitType"
                    [disabled]="isDetail"
                    [suggestions]="allunitTypes"
                    [dropdown]="true"
                    [forceSelection]="true"
                    field="unitType"
                    (completeMethod)="getUnitType($event)"
                  ></p-autoComplete>
                </div>

                <!-- <input class="form-control" name="unitType" [disabled]='true'[(ngModel)]="authFormDetail.Claim_unitType"
                  style="height: 30px;border: 1px solid #737374;font-size: 1.2rem;" type="text"> -->
              </div>
            </div>
            <br />
            <div class="row">
              <div class="col-md-2">
                <label>Units</label>
                <div>
                  <p-spinner
                    [(ngModel)]="claimUnits"
                    [disabled]="isDetail"
                    [step]="0.25"
                    size="30"
                    name="unitsAuth"
                    (onChange)="reduceTotalRemaining(authFormDetail.units)"
                  ></p-spinner>
                </div>
              </div>
              <div class="col-md-2">
                <label>Payor rate</label>
                <div>
                  <p-spinner
                    [(ngModel)]="claimPayorRate"
                    [disabled]="isDetail"
                    size="30"
                    name="payorRate"
                    [step]="0.25"
                    (onChange)="
                      onChangeAuthoInfoRates(authFormDetail.claimPayorRate)
                    "
                  >
                  </p-spinner>
                </div>

                <!-- <input class="form-control" name="payorRate" [(ngModel)]="authFormDetail.payorRate"
                  style="height: 30px;border: 1px solid #737374;font-size: 1.2rem;" type="text"> -->
              </div>
              <div class="col-md-2">
                <label>Provider rate</label>
                <div>
                  <p-spinner
                    name="Procode"
                    [disabled]="isDetail"
                    (onChange)="onChangeAuthoProviderRates()"
                    [step]="0.25"
                    [(ngModel)]="claimProviderRate"
                  ></p-spinner>
                </div>
              </div>
              <div class="col-md-3">
                <label>Requested By</label>
                <p-autoComplete
                  [(ngModel)]="requestedBy_Staff"
                  [suggestions]="metaData"
                  [disabled]="isDetail"
                  (completeMethod)="getStaffDetails($event)"
                  [forceSelection]="true"
                  [dropdown]="true"
                  placeholder="Type here to search"
                  emptyMessage="No matches found!"
                  field="fullName"
                  (onSelect)="triggerStaffView($event)"
                >
                </p-autoComplete>
                <!-- <input class="form-control" name="Procode" [(ngModel)]="procode"
                  style="height: 30px;border: 1px solid #737374;font-size: 1.2rem;" type="text"> -->
              </div>
            </div>

            <br />
            <div class="panel panel-default p-3">
              <div>
                <fieldset>
                  <legend><b>Payee</b></legend>
                  <div class="panel panel-default">
                    <div class="panel-body">
                      <div class="row">
                        <div class="col-md-3">
                          <label>Payment Type</label>
                          <p-autoComplete
                            [(ngModel)]="claim_payment"
                            [suggestions]="payLists"
                            [dropdown]="true"
                            [forceSelection]="true"
                            field="paymentType"
                            (completeMethod)="getPaymentType($event)"
                            (onSelect)="getPayment($event)"
                          ></p-autoComplete>
                        </div>
                        <div class="col-md-3">
                          <label>Who To Pay</label>
                          <div>
                            <p-dropdown
                              [options]="selectedPay"
                              [(ngModel)]="claim_pay"
                              optionLabel="name"
                            ></p-dropdown>
                          </div>
                          <!-- <p-dropdown [options]="selectedPay" [(ngModel)]="claim_pay" optionLabel="label"></p-dropdown> -->
                          <!-- <input class="form-control" name="Procode" [disabled]='true' [(ngModel)]="claim_pay"
                            style="height: 30px;border: 1px solid #737374;font-size: 1.2rem;" type="text"> -->
                        </div>
                        <div class="col-md-3">
                          <!-- <label *ngIf="isProvider">Provider</label>
                          <label *ngIf="isPayee">Payee</label> -->
                          <label>{{ claimProviderLabel }}</label>
                          <!-- <input class="form-control" [disabled]='true' name="payName" [(ngModel)]="payName"
                            style="height: 30px;border: 1px solid #737374;font-size: 1.2rem;" type="text"> -->
                          <div *ngIf="isProvider">
                            <p-autoComplete
                              [(ngModel)]="pay_claim_Name"
                              [suggestions]="providerLists"
                              [dropdown]="true"
                              [forceSelection]="true"
                              [disabled]="isDetail"
                              field="providerName"
                              (completeMethod)="getProviderList($event)"
                            ></p-autoComplete>
                          </div>
                          <div *ngIf="isPayee">
                            <p-autoComplete
                              [(ngModel)]="pay_claim_Name"
                              [suggestions]="payeeLists"
                              [dropdown]="true"
                              [forceSelection]="true"
                              [disabled]="isDetail"
                              field="payeeName"
                              (completeMethod)="getPayeeList($event)"
                            ></p-autoComplete>
                          </div>
                        </div>
                        <div class="col-md-3">
                          <label>Provider Sponser</label>
                          <input
                            class="form-control"
                            name="Procode"
                            [disabled]="true"
                            [(ngModel)]="procode"
                            style="
                              height: 30px;
                              border: 1px solid #737374;
                              font-size: 1.2rem;
                            "
                            type="text"
                          />
                        </div>
                      </div>
                      <br />
                      <div class="row">
                        <div class="col-md-3">
                          <label>Received Date</label>
                          <div>
                            <p-calendar
                              [(ngModel)]="authFormDetail.receivedDate"
                              [disabled]="isDetail"
                              name="beginDate"
                              [showTime]="true"
                              [disabled]="true"
                              [showIcon]="true"
                              [monthNavigator]="true"
                              [yearNavigator]="true"
                              yearRange="1900:2030"
                              [inputStyle]="{
                                height: '30px',
                                width: '100% !important'
                              }"
                            >
                            </p-calendar>
                          </div>
                        </div>
                        <div class="col-md-3">
                          <label>Resource Name</label>
                          <input
                            class="form-control"
                            name="Procode"
                            [disabled]="true"
                            [(ngModel)]="procode"
                            style="
                              height: 30px;
                              border: 1px solid #737374;
                              font-size: 1.2rem;
                            "
                            type="text"
                          />
                        </div>
                        <div class="col-md-3">
                          <label>Address</label>
                          <input
                            class="form-control"
                            name="Procode"
                            [disabled]="true"
                            [(ngModel)]="address"
                            style="
                              height: 30px;
                              border: 1px solid #737374;
                              font-size: 1.2rem;
                            "
                            type="text"
                          />
                        </div>
                        <div class="col-md-3">
                          <label>City, State, Zip</label>
                          <input
                            class="form-control"
                            name="Procode"
                            [disabled]="true"
                            [(ngModel)]="procode"
                            style="
                              height: 30px;
                              border: 1px solid #737374;
                              font-size: 1.2rem;
                            "
                            type="text"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </fieldset>
              </div>
            </div>
            <div class="row">
              <div class="col-md-3">
                <label
                  >Notes<span class="mandatory" *ngIf="isMandatory">
                    *</span
                  ></label
                >
                <textarea
                  [(ngModel)]="notes"
                  name="notes"
                  pInputTextArea
                  style="width: 100%; height: 100px"
                ></textarea>
              </div>
              <div class="col-md-3">
                <label>Payment Notes</label>
                <textarea
                  [(ngModel)]="paymentNotes"
                  name="paymentNotes"
                  pInputTextArea
                  style="width: 100%; height: 100px"
                ></textarea>
              </div>
              <div class="col-md-3">
                <label>Expected Payment Date</label>

                <p-calendar
                  [(ngModel)]="paymentDueDate"
                  [disabled]="true"
                  name="paymentDueDate"
                  [showIcon]="true"
                  [monthNavigator]="true"
                  [yearNavigator]="true"
                  yearRange="1900:2030"
                  [inputStyle]="{ height: '30px', width: '100% !important' }"
                >
                </p-calendar>

                <!-- <input class="form-control" name="Procode" [disabled]='disableEXPdate' [(ngModel)]="procode"
                  style="height: 30px;border: 1px solid #737374;font-size: 1.2rem;" type="text"> -->
                <br />
                <p>
                  <p-checkbox
                    name="groupname"
                    [(ngModel)]="chck_state"
                    label="Pay Placement"
                    [binary]="true"
                  >
                  </p-checkbox>
                </p>

                <p>
                  <p-checkbox
                    name="isNotFCHWeb"
                    [(ngModel)]="isNotFCHWeb"
                    label="Not on FCH web"
                    [binary]="true"
                  >
                  </p-checkbox>
                </p>
              </div>
              <div class="col-md-3">
                <label>Claim Status</label>
                <div>
                  <p-autoComplete
                    class="width-autocomplete"
                    placeholder="Type here to search"
                    emptyMessage="No records found!"
                    [dropdown]="true"
                    [forceSelection]="true"
                    field="claimStatus"
                    (onSelect)="getSelectStatus($event)"
                    (completeMethod)="allClaims()"
                    [suggestions]="metaData"
                    name="claimStatus"
                    [(ngModel)]="claimStatus"
                  >
                  </p-autoComplete>
                </div>
                <!-- <input class="form-control" name="claimStatus" [(ngModel)]="claimStatus" [disabled]='true'
                  style="height: 30px;border: 1px solid #737374;font-size: 1.2rem;" type="text"> -->
                <br />
                <div>
                  <button
                    *ngIf="!isUpdate"
                    class="sf-positive-btn pull-right"
                    (click)="showValidateClaim()"
                    style="margin-top: 0px !important"
                  >
                    <span>Save</span>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading">Claims</div>
          <div class="panel-body" style="padding: 10px">
            <table class="table table-striped table-bordered">
              <thead>
                <tr>
                  <th>ClaimID</th>
                  <th>Provider/Payee Name</th>
                  <th>Claim Status</th>
                  <th>Units</th>
                  <th>Payor Rate</th>
                  <th>Total Payor Rate</th>
                  <th>Provider Rate</th>
                  <th>Total Provider Rate</th>
                  <th>Begin Date</th>
                  <th>End Date</th>
                  <th>Expected payment Date</th>
                  <th>Posted Date</th>
                  <th>GL Key</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let provide_data of claimAllDetail; let i1 = index">
                  <td>{{ provide_data.ClaimID }}</td>
                  <td>{{ provide_data.ProviderName }}</td>
                  <td>{{ provide_data.ClaimStatus }}</td>
                  <td>{{ provide_data.Units }}</td>
                  <td>{{ provide_data.PayorRate }}</td>
                  <td>{{ provide_data.TotalPayorRate }}</td>
                  <td>{{ provide_data.ProviderRate }}</td>
                  <td>{{ provide_data.TotalProviderRate }}</td>
                  <td>{{ provide_data.BeginDate }}</td>
                  <td>{{ provide_data.EndDate }}</td>
                  <td>{{ provide_data.ExpactedPaymentDate }}</td>
                  <td>{{ provide_data.PostedDate }}</td>
                  <td>{{ provide_data.GLKey }}</td>
                </tr>
              </tbody>
            </table>

            <p *ngIf="this.claimAllDetail.length == 0" class="text-center">
              <b>No Data Found</b>
            </p>
            <!-- <ag-grid-angular style="width: 500px; height: 70vh;" class="ag-theme-balham" [rowData]="claimAllDetail"
            [columnDefs]="columnClaimDefs" [enableSorting]="true" [rowDragManaged]="true"
            [suppressDragLeaveHidesColumns]="true" enableColResize="true" style="width: 100%;height: 70vh;"
            animateRows="true" rowSelection="multiple">
          </ag-grid-angular> -->
          </div>
        </div>
      </div>
      <div>
        <div *ngIf="isUpdate">
          <app-form-footer
            [attachmentControll]="true"
            (attachDoc)="navigateTo()"
            [isDisabled]="isDisabled"
            [editControll]="isEdit"
            [currentNodeValue]="req"
            (save)="saveClaim()"
            (edit)="editForm()"
            (discard)="discard()"
            [isFormLog]="isFormLog"
            [formLogInfo]="formLogInfo"
          >
          </app-form-footer>
        </div>
      </div>
    </div>
  </div>
</div>
